+ 1. Добавить в книгу атрибут пакет (имя пакета с прикладной логикой). Добавить метод fn (две сигнатуры): использовать его для callback и др. функций.
+ 2. Сделать отдельное описание роли с последующим добавлением ее в книгу (метод condition переименовать в when)
+ 3. Метод prepare перенести из role_page в page
+  4. Добавить метод prepare  в роль.
>  4.5 Добавить в роль набор параметров (ключ-значение) + методы set и get
+ 5. Один метод when для нескольких страниц роли!
  6. Добавить методы для преобразования параметров книги.
  7. Подключить клиентский скрипт.
  8. Перевести все html на template